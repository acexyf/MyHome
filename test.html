<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>天气</title>
	<script type="text/javascript" src="http://sandbox.runjs.cn/uploads/rs/439/6ooo5acx/jquery.js"></script>
</head>
<style type="text/css">
body,td,th{font-size:12px;}
a{text-decoration: none;}
#tele p a{padding:0 5px; cursor:pointer;}
#result{background: #F7FFFB;}
#result p{width: 500px; padding: 10px;}
</style>
<body>

<div id="search_form">
    <form onsubmit="return false;">
        <input type="text" id="text" placeholder="请输入所要查询城市" value="江阴" />
        <input type="submit" id="query"  value="查询" >
    </form>
</div>
<div id="tele" style="text-align:left; padding:20px 5px; font-size:12px;">
    <p>
        <a>北京</a><a>上海</a><a>天津</a><a>重庆</a><a>广州</a><a>南京</a><a>杭州</a><a>合肥</a><a>郑州</a><a>成都</a><a>石家庄</a>
    </p>
    <p>
        <a>长沙</a><a>南昌</a><a>武汉</a><a>济南</a><a>沈阳</a><a>兰州</a><a>桂林</a><a>厦门</a><a>西安</a><a>长春</a><a>哈尔滨</a>
    </p>
    <p>
        <a>太原</a><a>乌鲁木齐</a><a>贵阳</a><a>银川</a><a>大连</a><a>昆明</a><a>海南</a><a>拉萨</a><a>香港</a><a>台州</a><a>澳门</a>
    </p>
</div>
<div id="result_weather"></div>

<div class="tables">

    <table id="result_tab" cellspacing="0" cellpadding="10px">

    </table>
</div>




<script type="text/javascript">

$(function() {

    $("#tele a").bind("click", function(){
        $('#text').val($(this).text().trim());
    }); 

    $("#query").click(function(){
        $("#result_weather").empty();
    	$("#result_tab").empty();
        if($('#text').val()=="")
        {
            $("#result_weather").html("地址为空");

        }
        else
        {
           ajax(); 
        }
    })

	function ajax()
	{
		$.ajax({
			type:"get",
			dataType:"json",
			url:"http://wthrcdn.etouch.cn/weather_mini?city="+$('#text').val().trim(),
            beforeSend:function(XMLHttpRequest)
            {
                // console.log("123");
                // return false;
            },
            complete:function(XMLHttpRequest, textStatus){
                // console.log(textStatus)
            },
			success:function(data){
                // console.log(data.status);
                if(data.status==1000)
                {
                    $("#result_weather").html(data.data.city+":"+data.data.ganmao);
                    var content="<tr><th>日期</th><th>风向</th><th>风力</th><th>最高温</th><th>天气</th><th>最低温</th></tr>";
                    for(var i=0;i<=3;i++)
                    {
                        content+="<tr><td>"+data.data.forecast[i].date+"</td><td>"+data.data.forecast[i].fengxiang+"</td><td>"+data.data.forecast[i].fengli+"</td><td>"+data.data.forecast[i].high+"</td><td>"+data.data.forecast[i].type+"</td><td>"+data.data.forecast[i].low+"</td></tr>";
                    }
                    $("#result_tab").append(content);
                }
                else
                {
                    $("#result_weather").html("天气获取失败");
                }
			}
		});
	}

    ajax();
});
</script>
</body>
</html>